<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="基于Hugo的静态站点构建及编译渲染详解#前言#​	在工作和学习中，我们常常需要掌握新的技术工具和知识点，解决技术难题。这时，写博客成为了一个非常有益的方式，它不仅有助于巩固所学知识、提升学习能力，还能提高文字组织和逻辑思维能力。此外，博客的发布可以向外界展示我们的成就，与更多人分享经验，并促进讨论和交流。搭建个人博客是一个有益的过程，它可以加强知识、提高写作和组织能力，同时与他人分享经验并获得反馈。
​	要建立自己的个人博客网站，您可以选择不同的搭建工具。下面是对一些常见搭建工具（Hugo、Wordpress、Hexo）在不同方面的比较，从表中可以看出，Hugo 具有诸多优点，如安装简便、操作简单、部署方便等，而且访问速度非常快，这可以极大地提升博客的写作和发布体验。因此，我选择了使用 Hugo 和 GitHub Pages 的组合来搭建个人博客，这样无需服务器，就可以轻松拥有自己的博客空间。接下来，我将简要介绍使用 Hugo 搭建个人博客的步骤以及我的一些阅读总结。
工具 静态/动态 托管 安全性 访问速度 markdown 编程语言 安装和使用 Wordpress 动态 复杂 需要经常升级 快 插件支持 PHP 复杂 Hugo 静态 简单 非常安全 非常快 支持 Go 简单 Hexo 静态 简单 非常安全 快 支持 nodejs 稍微复杂 一、 Hugo安装应用及个性化配置#1. Hugo是什么#​	Hugo 是一款用 Go 语言编写的现代、高效的静态网站生成器，旨在为最终用户提供出色的浏览体验，同时为网站作者提供顶级的写作体验。技术上来说，Hugo 是一个静态站点生成器，它能够快速生成安全的网站。Hugo 支持多种托管平台，包括 Netflix、Heroku、GoDaddy、DreamHost、GitHub Pages、GitLab Pages、Surge、Firebase、Google Cloud Storage、Amazon S3、Rackspace、Azure 和 CloudFront，并且与 CDN 配合得非常出色。Hugo 不需要数据库，它几乎可以在瞬间构建站点，只需一次更改即可进行重新构建。借助 Hugo，您可以快速创建各种静态网站，如博客、文档、公司主页、产品介绍等等。相对于其他静态网站生成器，Hugo 具备以下特点：">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="Hugo建站" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://hyylc.github.io/docs/hugo/note1/" />
<title>Hugo建站 | Hyy小站</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.33a48f5432973b8ff9a82679d9e45d67f2c15d4399bd2829269455cfe390b5e8.css" integrity="sha256-M6SPVDKXO4/5qCZ52eRdZ/LBXUOZvSgpJpRVz&#43;OQteg=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.bfa1d7d5306886655e98ee3985abb6e6f3dac9c957533286feba46115dd9154c.js" integrity="sha256-v6HX1TBohmVemO45hau25vPayclXUzKG/rpGEV3ZFUw=" crossorigin="anonymous"></script>
<link rel="alternate" type="application/rss+xml" href="https://hyylc.github.io/docs/hugo/note1/index.xml" title="Hyy小站" />
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>Hyy小站</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  



  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="/docs/js/" class="">JS笔记</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/js/note2/" class="">手写函数</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/js/note1/" class="">函数柯里化和Promise</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/js/note3/" class="">JS内置对象Array（一）</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="/docs/vue/" class="">Vue笔记</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/vue/note3/" class="">Vue3.0 基础</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/vue/note4/" class="">Vue3和Vue2的区别</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/vue/note1/" class="">Vue响应式原理</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/vue/note2/" class="">Vue组合式API</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="/docs/%E7%BD%91%E7%BB%9C/" class="">网络笔记</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/%E7%BD%91%E7%BB%9C/note1/" class="">前端跨域问题</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="/docs/%E7%BB%84%E4%BB%B6%E5%BA%93/" class="">组件库笔记</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/%E7%BB%84%E4%BB%B6%E5%BA%93/note1/" class="">element-ui</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="/docs/hugo/" class="">Hugo笔记</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/hugo/note1/" class="active">Hugo建站</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="/docs/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" class="">开发工具</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/note1/" class="">Vite &amp; Pinia</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/note2/" class="">其他工具</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Hugo建站</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#前言">前言</a></li>
    <li><a href="#一-hugo安装应用及个性化配置">一、 Hugo安装应用及个性化配置</a>
      <ul>
        <li><a href="#1-hugo是什么">1. Hugo是什么</a></li>
        <li><a href="#2-搭建与使用">2. 搭建与使用</a></li>
      </ul>
    </li>
    <li><a href="#二hugo-编译-markdown原理解析">二、Hugo 编译 markdown原理解析</a>
      <ul>
        <li><a href="#1-ast">1. AST</a></li>
        <li><a href="#2-commonmark-规范">2. CommonMark 规范</a></li>
        <li><a href="#3-goldmark">3. Goldmark</a></li>
        <li><a href="#4-例子">4. 例子</a></li>
      </ul>
    </li>
    <li><a href="#三hugo-plugin及themes基础介绍">三、Hugo Plugin及themes基础介绍</a>
      <ul>
        <li><a href="#1-hugo-plugins">1. Hugo plugins</a></li>
        <li><a href="#2-hugo-themes">2. Hugo themes</a></li>
      </ul>
    </li>
    <li><a href="#四成果及问题记录">四、成果及问题记录</a>
      <ul>
        <li><a href="#1-成果展示">1. 成果展示</a></li>
        <li><a href="#2-问题记录">2. 问题记录</a></li>
      </ul>
    </li>
    <li><a href="#五参考文献">五、参考文献</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="基于hugo的静态站点构建及编译渲染详解">
  基于Hugo的静态站点构建及编译渲染详解
  <a class="anchor" href="#%e5%9f%ba%e4%ba%8ehugo%e7%9a%84%e9%9d%99%e6%80%81%e7%ab%99%e7%82%b9%e6%9e%84%e5%bb%ba%e5%8f%8a%e7%bc%96%e8%af%91%e6%b8%b2%e6%9f%93%e8%af%a6%e8%a7%a3">#</a>
</h1>
<h2 id="前言">
  前言
  <a class="anchor" href="#%e5%89%8d%e8%a8%80">#</a>
</h2>
<p>​	在工作和学习中，我们常常需要掌握新的技术工具和知识点，解决技术难题。这时，写博客成为了一个非常有益的方式，它不仅有助于巩固所学知识、提升学习能力，还能提高文字组织和逻辑思维能力。此外，博客的发布可以向外界展示我们的成就，与更多人分享经验，并促进讨论和交流。搭建个人博客是一个有益的过程，它可以加强知识、提高写作和组织能力，同时与他人分享经验并获得反馈。</p>
<p>​	要建立自己的个人博客网站，您可以选择不同的搭建工具。下面是对一些常见搭建工具（<a href="https://gohugo.io/"><code>Hugo</code></a>、<a href="https://wordpress.com/zh-cn/"><code>Wordpress</code></a>、<a href="https://hexo.io/zh-cn/"><code>Hexo</code></a>）在不同方面的比较，从表中可以看出，Hugo 具有诸多优点，如安装简便、操作简单、部署方便等，而且访问速度非常快，这可以极大地提升博客的写作和发布体验。因此，我选择了使用 <code>Hugo</code> 和 <code>GitHub Pages</code> 的组合来搭建个人博客，这样无需服务器，就可以轻松拥有自己的博客空间。接下来，我将简要介绍使用 <code>Hugo</code> 搭建个人博客的步骤以及我的一些阅读总结。</p>
<table>
<thead>
<tr>
<th style="text-align:center">工具</th>
<th style="text-align:center">静态/动态</th>
<th style="text-align:center">托管</th>
<th style="text-align:center">安全性</th>
<th style="text-align:center">访问速度</th>
<th style="text-align:center">markdown</th>
<th style="text-align:center">编程语言</th>
<th style="text-align:center">安装和使用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Wordpress</td>
<td style="text-align:center">动态</td>
<td style="text-align:center">复杂</td>
<td style="text-align:center">需要经常升级</td>
<td style="text-align:center">快</td>
<td style="text-align:center">插件支持</td>
<td style="text-align:center">PHP</td>
<td style="text-align:center">复杂</td>
</tr>
<tr>
<td style="text-align:center">Hugo</td>
<td style="text-align:center">静态</td>
<td style="text-align:center">简单</td>
<td style="text-align:center">非常安全</td>
<td style="text-align:center">非常快</td>
<td style="text-align:center">支持</td>
<td style="text-align:center">Go</td>
<td style="text-align:center">简单</td>
</tr>
<tr>
<td style="text-align:center">Hexo</td>
<td style="text-align:center">静态</td>
<td style="text-align:center">简单</td>
<td style="text-align:center">非常安全</td>
<td style="text-align:center">快</td>
<td style="text-align:center">支持</td>
<td style="text-align:center">nodejs</td>
<td style="text-align:center">稍微复杂</td>
</tr>
</tbody>
</table>
<h2 id="一-hugo安装应用及个性化配置">
  一、 Hugo安装应用及个性化配置
  <a class="anchor" href="#%e4%b8%80-hugo%e5%ae%89%e8%a3%85%e5%ba%94%e7%94%a8%e5%8f%8a%e4%b8%aa%e6%80%a7%e5%8c%96%e9%85%8d%e7%bd%ae">#</a>
</h2>
<h3 id="1-hugo是什么">
  1. Hugo是什么
  <a class="anchor" href="#1-hugo%e6%98%af%e4%bb%80%e4%b9%88">#</a>
</h3>
<p>​	<code>Hugo</code> 是一款用 Go 语言编写的现代、高效的静态网站生成器，旨在为最终用户提供出色的浏览体验，同时为网站作者提供顶级的写作体验。技术上来说，Hugo 是一个静态站点生成器，它能够快速生成安全的网站。Hugo 支持多种托管平台，包括 Netflix、Heroku、GoDaddy、DreamHost、GitHub Pages、GitLab Pages、Surge、Firebase、Google Cloud Storage、Amazon S3、Rackspace、Azure 和 CloudFront，并且与 CDN 配合得非常出色。Hugo 不需要数据库，它几乎可以在瞬间构建站点，只需一次更改即可进行重新构建。借助 Hugo，您可以快速创建各种静态网站，如博客、文档、公司主页、产品介绍等等。相对于其他静态网站生成器，Hugo 具备以下特点：</p>
<ul>
<li><strong>极速编译生成：</strong> 页面编译速度极快，每个页面的编译时间不到1毫秒；</li>
<li><strong>跨平台支持：</strong> 支持多操作系统运行，包括 Mac OS X、Linux、Windows 等；</li>
<li><strong>便捷安装：</strong> 安装非常简便，无需繁琐的配置过程；</li>
<li><strong>本地调试：</strong> 支持 LiveReload，本地调试自动即时刷新页面，提高开发效率；</li>
<li><strong>主题支持：</strong> 丰富的主题支持，提供定制化网站风格主题；</li>
<li><strong>灵活部署：</strong> 部署支持任何HTTP 的服务器，非常灵活和自由。</li>
</ul>
<h3 id="2-搭建与使用">
  2. 搭建与使用
  <a class="anchor" href="#2-%e6%90%ad%e5%bb%ba%e4%b8%8e%e4%bd%bf%e7%94%a8">#</a>
</h3>
<p><img src="/hugo_img/process.png" alt="" /></p>
<p><em><strong>PS:此处的安装步骤在Win10上进行。</strong></em></p>
<h4 id="21-安装hugo">
  2.1 安装Hugo
  <a class="anchor" href="#21-%e5%ae%89%e8%a3%85hugo">#</a>
</h4>
<ol>
<li>
<p><strong>下载 Hugo 压缩包：</strong> 前往 <a href="https://github.com/gohugoio/hugo/releases">Hugo GitHub Releases 页面</a> 选择适合您操作系统的版本。通常，您会找到 Windows、Mac 和 Linux 版本的可执行文件。下载适合您系统的压缩包。</p>
</li>
<li>
<p><strong>解压缩 Hugo：</strong> 解压下载的压缩包，您将会得到一个名为 <code>hugo</code> 或 <code>hugo.exe</code> 的可执行文件。</p>
</li>
<li>
<p><strong>将 Hugo 目录添加到环境变量 PATH 中（仅适用于 Windows）：</strong></p>
<ul>
<li>在 Windows 中，右键单击“我的电脑”或“此电脑”，然后选择“属性”。</li>
<li>在左侧导航栏中，选择“高级系统设置”。</li>
<li>在“高级”选项卡下，点击“环境变量”按钮。</li>
<li>在“系统变量”部分，找到并选择名为“Path”的变量，然后点击“编辑”按钮。</li>
<li>在编辑系统变量窗口中，点击“新建”按钮，然后添加 Hugo 可执行文件的目录路径。确保每个路径之间使用分号分隔。例如：<code>C:\path\to\hugo</code>。</li>
<li>点击“确定”按钮以保存更改。</li>
</ul>
</li>
<li>
<p><strong>验证 Hugo 安装是否成功：</strong> 打开命令行终端（Command Prompt）或终端（Terminal），然后执行以下命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>hugo version
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Hugo v0.86.1-F6821B88 windows/amd64 BuildDate=2021-07-30T10:13:35Z VendorInfo=goHugoio</span>
</span></span></code></pre></div><p>如果安装成功，您将会看到 Hugo 的版本信息，确认安装成功。</p>
</li>
<li>
<p><strong>Hugo基础方法:</strong> 执行命令 Hugo help 使用方法：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>Hugo is the main command, used to build your Hugo site.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Hugo is a Fast and Flexible Static Site Generator
</span></span><span style="display:flex;"><span>built with love by spf13 and friends in Go.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Complete documentation is available at http://goHugo.io/.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Usage:
</span></span><span style="display:flex;"><span>  Hugo <span style="color:#f92672">[</span>flags<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>  Hugo <span style="color:#f92672">[</span>command<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Available Commands:
</span></span><span style="display:flex;"><span>  config      Print the site configuration
</span></span><span style="display:flex;"><span>  convert     Convert your content to different formats
</span></span><span style="display:flex;"><span>  deploy      Deploy your site to a Cloud provider.
</span></span><span style="display:flex;"><span>  env         Print Hugo version and environment info
</span></span><span style="display:flex;"><span>  gen         A collection of several useful generators.
</span></span><span style="display:flex;"><span>  help        Help about any command
</span></span><span style="display:flex;"><span>  import      Import your site from others.
</span></span><span style="display:flex;"><span>  list        Listing out various types of content
</span></span><span style="display:flex;"><span>  mod         Various Hugo Modules helpers.
</span></span><span style="display:flex;"><span>  new         Create new content <span style="color:#66d9ef">for</span> your site
</span></span><span style="display:flex;"><span>  server      A high performance webserver
</span></span><span style="display:flex;"><span>  version     Print the version number of Hugo
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Flags:
</span></span><span style="display:flex;"><span>  -b, --baseURL string             hostname <span style="color:#f92672">(</span>and path<span style="color:#f92672">)</span> to the root, e.g. http://spf13.com/
</span></span><span style="display:flex;"><span>  -D, --buildDrafts                include content marked as draft
</span></span><span style="display:flex;"><span>  -E, --buildExpired               include expired content
</span></span><span style="display:flex;"><span>  -F, --buildFuture                include content with publishdate in the future
</span></span><span style="display:flex;"><span>      --cacheDir string            filesystem path to cache directory. Defaults: $TMPDIR/Hugo_cache/
</span></span><span style="display:flex;"><span>      --cleanDestinationDir        remove files from destination not found in static directories
</span></span><span style="display:flex;"><span>      --config string              config file <span style="color:#f92672">(</span>default is path/config.yaml|json|toml<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>      --configDir string           config dir <span style="color:#f92672">(</span>default <span style="color:#e6db74">&#34;config&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>  -c, --contentDir string          filesystem path to content directory
</span></span><span style="display:flex;"><span>      --debug                      debug output
</span></span><span style="display:flex;"><span>  -d, --destination string         filesystem path to write files to
</span></span><span style="display:flex;"><span>      --disableKinds strings       disable different kind of pages <span style="color:#f92672">(</span>home, RSS etc.<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>      --enableGitInfo              add Git revision, date and author info to the pages
</span></span><span style="display:flex;"><span>  -e, --environment string         build environment
</span></span><span style="display:flex;"><span>      --forceSyncStatic            copy all files when static is changed.
</span></span><span style="display:flex;"><span>      --gc                         enable to run some cleanup tasks <span style="color:#f92672">(</span>remove unused cache files<span style="color:#f92672">)</span> after the build
</span></span><span style="display:flex;"><span>  -h, --help                       help <span style="color:#66d9ef">for</span> Hugo
</span></span><span style="display:flex;"><span>      --i18n-warnings              print missing translations
</span></span><span style="display:flex;"><span>      --ignoreCache                ignores the cache directory
</span></span><span style="display:flex;"><span>      --ignoreVendor               ignores any _vendor directory
</span></span><span style="display:flex;"><span>      --ignoreVendorPaths string   ignores any _vendor <span style="color:#66d9ef">for</span> module paths matching the given Glob pattern
</span></span><span style="display:flex;"><span>  -l, --layoutDir string           filesystem path to layout directory
</span></span><span style="display:flex;"><span>      --log                        enable Logging
</span></span><span style="display:flex;"><span>      --logFile string             log File path <span style="color:#f92672">(</span><span style="color:#66d9ef">if</span> set, logging enabled automatically<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>      --minify                     minify any supported output format <span style="color:#f92672">(</span>HTML, XML etc.<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>      --noChmod                    don<span style="color:#e6db74">&#39;t sync permission mode of files
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      --noTimes                    don&#39;</span>t sync modification time of files
</span></span><span style="display:flex;"><span>      --path-warnings              print warnings on duplicate target paths etc.
</span></span><span style="display:flex;"><span>      --poll string                set this to a poll interval, e.g --poll 700ms, to use a poll based approach to watch <span style="color:#66d9ef">for</span> file system changes
</span></span><span style="display:flex;"><span>      --print-mem                  print memory usage to screen at intervals
</span></span><span style="display:flex;"><span>      --quiet                      build in quiet mode
</span></span><span style="display:flex;"><span>      --renderToMemory             render to memory <span style="color:#f92672">(</span>only useful <span style="color:#66d9ef">for</span> benchmark testing<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>  -s, --source string              filesystem path to read files relative from
</span></span><span style="display:flex;"><span>      --templateMetrics            display metrics about template executions
</span></span><span style="display:flex;"><span>      --templateMetricsHints       calculate some improvement hints when combined with --templateMetrics
</span></span><span style="display:flex;"><span>  -t, --theme strings              themes to use <span style="color:#f92672">(</span>located in /themes/THEMENAME/<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>      --themesDir string           filesystem path to themes directory
</span></span><span style="display:flex;"><span>      --trace file                 write trace to file <span style="color:#f92672">(</span>not useful in general<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>  -v, --verbose                    verbose output
</span></span><span style="display:flex;"><span>      --verboseLog                 verbose logging
</span></span><span style="display:flex;"><span>  -w, --watch                      watch filesystem <span style="color:#66d9ef">for</span> changes and recreate as needed
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Additional help topics:
</span></span><span style="display:flex;"><span>  Hugo check   Contains some verification checks
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Use <span style="color:#e6db74">&#34;Hugo [command] --help&#34;</span> <span style="color:#66d9ef">for</span> more information about a command.
</span></span></code></pre></div></li>
</ol>
<h4 id="22-新建hugo站点">
  2.2 新建Hugo站点
  <a class="anchor" href="#22-%e6%96%b0%e5%bb%bahugo%e7%ab%99%e7%82%b9">#</a>
</h4>
<ol>
<li>执行命令 <code>hugo new site example</code>，成功后会显示：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>Congratulations! Your new Hugo site is created in 目录/example.
</span></span><span style="display:flex;"><span>Just a few more steps and you<span style="color:#960050;background-color:#1e0010">&#39;</span>re ready to go:
</span></span><span style="display:flex;"><span>1. Download a theme into the same-named folder.
</span></span><span style="display:flex;"><span>   Choose a theme from https://themes.goHugo.io/ or
</span></span><span style="display:flex;"><span>   create your own with the <span style="color:#e6db74">&#34;Hugo new theme &lt;THEMENAME&gt;&#34;</span> command.
</span></span><span style="display:flex;"><span>2. Perhaps you want to add some content. You can add single files
</span></span><span style="display:flex;"><span>   with <span style="color:#e6db74">&#34;Hugo new &lt;SECTIONNAME&gt;\&lt;FILENAME&gt;.&lt;FORMAT&gt;&#34;</span>.
</span></span><span style="display:flex;"><span>3. Start the built-in live server via <span style="color:#e6db74">&#34;Hugo server&#34;</span>.
</span></span></code></pre></div><ol start="2">
<li>我们可以查看目录结构</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>├── config.toml         <span style="color:#75715e"># 配置文件</span>
</span></span><span style="display:flex;"><span>├── content             <span style="color:#75715e"># 博客文章目录            </span>
</span></span><span style="display:flex;"><span>├── layouts             <span style="color:#75715e"># 网站布局</span>
</span></span><span style="display:flex;"><span>├── static              <span style="color:#75715e"># 静态内容</span>
</span></span><span style="display:flex;"><span>└── themes              <span style="color:#75715e"># 主题</span>
</span></span></code></pre></div><ol start="3">
<li>执行命令 <code>hugo server</code> 本地预览，打开浏览器可能会看到 <!-- raw HTML omitted -->Page Not Found <!-- raw HTML omitted -->，这是因为 Hugo 没有默认主题无法显示，执行下面的命令安装一个主题并运行：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>git clone https://github.com/spf13/hyde.git themes<span style="color:#ae81ff">\h</span>yde
</span></span><span style="display:flex;"><span>Hugo serve -D -t hyde
</span></span></code></pre></div><p><img src="/hugo_img/hugo_start.png" alt="" /></p>
<h4 id="23-创建文章">
  2.3 创建文章
  <a class="anchor" href="#23-%e5%88%9b%e5%bb%ba%e6%96%87%e7%ab%a0">#</a>
</h4>
<ol>
<li>使用命令 <code>hugo new path/name.md</code> 可以创建一个内容页面，新创建的文件默认在目录 <code>content </code>内。</li>
<li>例如：使用命令 <code>hugo new about.md </code>创建文章，新创建的文件默认在目录<code>content</code> 里，会自动生成如下内容，一般称为 &ldquo;front matter&rdquo; 前言部分：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>title: &#34;About&#34;
</span></span><span style="display:flex;"><span>date: 2023-09-01T12:12:20+08:00
</span></span><span style="display:flex;"><span>draft: true
</span></span><span style="display:flex;"><span>---
</span></span></code></pre></div><ol start="2">
<li>可在前言后置部分使用 <code>Markdown</code> 语法填充内容，如：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span>show me
</span></span></code></pre></div><ol start="3">
<li>本地预览即可查看创建的文章，默认显示 content 目录下的所有文章：</li>
</ol>
<p><img src="/hugo_img/hugo_content.png" alt="" /></p>
<h4 id="24-添加主题">
  2.4 添加主题
  <a class="anchor" href="#24-%e6%b7%bb%e5%8a%a0%e4%b8%bb%e9%a2%98">#</a>
</h4>
<p>​	我们已经成功创建博客项目并添加了文章。在创建文章之前，我们可以为项目添加一个主题样式，实现更丰富的展示效果。Hugo <a href="https://themes.goHugo.io/">社区</a> 中有各种各样的主题，可以自由地选择模板。这里以主题 <a href="https://themes.goHugo.io/themes/Hugo-book/">Hugo-book</a> 为例，我们可以在官网找到安装的命令：</p>
<ol>
<li>进入 Hugo 项目的根目录并执行：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>// 安装主题
</span></span><span style="display:flex;"><span>git submodule add https://github.com/alex-shpak/Hugo-book themes/Hugo-book
</span></span><span style="display:flex;"><span>// 将主题的例子拷贝到Hugo的content目录下
</span></span><span style="display:flex;"><span>cp -R themes/Hugo-book/exampleSite/content.en/* ./content
</span></span></code></pre></div><ol start="2">
<li>运行项目（在根目录的配置文件Hugo.toml 中设置 theme = &ldquo;Hugo-book&rdquo;/theme: Hugo-book 指定主题）：</li>
</ol>
<pre tabindex="0"><code>// &#39;--theme Hugo-book&#39; 指定主题
Hugo server --theme Hugo-book
</code></pre><ol start="3">
<li>预览站点</li>
</ol>
<p><img src="/hugo_img/hugo_book.png" alt="" /></p>
<blockquote>
<ul>
<li>我在运行项目的时候遇到报错：<!-- raw HTML omitted -->failed to transform &ldquo;book.scss&rdquo; (text/x-scss)<!-- raw HTML omitted -->，该可以通过安装 Hugo-extend 版本解决，安装后重复上述流程即可。</li>
</ul>
</blockquote>
<h4 id="25-新建github库">
  2.5 新建GitHub库
  <a class="anchor" href="#25-%e6%96%b0%e5%bb%bagithub%e5%ba%93">#</a>
</h4>
<ol>
<li>新建git仓库，仓库名称为 userName.github.io，注意这里的 userName 要与GitHub账号的用户名保持一致。</li>
<li>保存仓库路径： <a href="https://github.com/userName/userName.github.io">https://github.com/userName/userName.github.io</a>。</li>
</ol>
<h4 id="26-应用部署">
  2.6 应用部署
  <a class="anchor" href="#26-%e5%ba%94%e7%94%a8%e9%83%a8%e7%bd%b2">#</a>
</h4>
<p><code>GitHub Pages</code>是<code>GitHub</code>提供的一个网页寄存服务，可以寄存静态页面，这个特性特别适合博客的搭建。具体步骤如下：</p>
<ol>
<li>
<p>将<code>Hugo.toml (config.toml)</code>中的 baseURL 改为想要访问的地址：baseURL = &lsquo;<a href="https://userName.github.io/%27">https://userName.github.io/&rsquo;</a>；</p>
</li>
<li>
<p>在根目录下的终端执行命令 Hugo，会生成 public 文件夹，里面就是要上传到 GitHub 仓库的内容；</p>
</li>
<li>
<p>在 public 文件夹下打开 git bash，运行以下命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>git init
</span></span><span style="display:flex;"><span>git add -A
</span></span><span style="display:flex;"><span>git commit -am<span style="color:#e6db74">&#34;init&#34;</span>
</span></span><span style="display:flex;"><span>git remote add origin <span style="color:#f92672">[</span>https://github.com/hyylc/userName.github.io<span style="color:#f92672">](</span>https://github.com/hyylc/userName.github.io<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>git push -f origin master（网络问题上传不了就多上传几次）
</span></span></code></pre></div></li>
<li>
<p>在浏览器输入网址 <a href="https://userName.github.io/">https://userName.github.io/</a> 即可访问部署后的网站。</p>
</li>
</ol>
<h4 id="27-更新博客">
  2.7 更新博客
  <a class="anchor" href="#27-%e6%9b%b4%e6%96%b0%e5%8d%9a%e5%ae%a2">#</a>
</h4>
<ol>
<li><strong>添加或修改文章：</strong> 在您的本地 Hugo 站点中，您可以随时添加新文章或对现有文章进行修改。这是保持博客内容新鲜和有趣的关键。</li>
<li><strong>重新生成站点：</strong> 打开终端并进入 Hugo 项目的根目录，然后运行 <code>Hugo</code> 命令。这将触发 Hugo 重新构建并生成博客站点的静态文件。在此过程中，Hugo 将处理您对文章和站点配置所做的任何更改。</li>
<li><strong>访问 public 文件夹：</strong> 生成的静态文件将存储在项目根目录下的 <code>public</code> 文件夹中。这个文件夹包含了您的博客的所有静态资源，如 HTML、CSS、JavaScript 和图片。</li>
<li><strong>提交更改到远程仓库：</strong> 如果您的博客是托管在版本控制系统（例如 Git）上，您可以进入 <code>public</code> 文件夹，将其中的内容提交到远程仓库。这将更新您的在线博客站点，使其显示最新的内容。</li>
</ol>
<p>​		这个流程非常简单，确保了博客的内容更新和发布。如果您希望自动化这个过程，您还可以考虑使用持续集成工具（如 GitHub Actions 或 Netlify）来自动构建和部署您的博客站点，这样每次提交更改时都会自动触发更新。这种方式可以节省时间并确保您的博客保持最新状态。</p>
<h2 id="二hugo-编译-markdown原理解析">
  二、Hugo 编译 markdown原理解析
  <a class="anchor" href="#%e4%ba%8chugo-%e7%bc%96%e8%af%91-markdown%e5%8e%9f%e7%90%86%e8%a7%a3%e6%9e%90">#</a>
</h2>
<p>​	经过上述步骤，我们已经成功搭建属于自己的个人博客并部署完成。</p>
<p>​	Hugo具有出色的Markdown支持，只要将 markdown 格式编写的文章添加到本地项目中并推到 GitHub 仓库，就可以更新博客。在这个过程中，我产生了疑问：Hugo 是如何将我们编写的 .md 文件解析成 HTML 并展示到页面上的呢？通过查看 Hugo 官方文档，发现Markdown 解析的底层原理，以及 Hugo 默认使用的解析器 Goldmark，其中Goldmark 是一个用于解析 Markdown 的 Go 语言库，它遵循 CommonMark 规范。为了理解 Goldmark 如何将 Markdown 转换成 HTML，让我们从两个重要的概念开始：AST（Abstract Syntax Tree，抽象语法树）和 CommonMark 规范。</p>
<h3 id="1-ast">
  1. AST
  <a class="anchor" href="#1-ast">#</a>
</h3>
<p>​	AST，全称为抽象语法树（Abstract Syntax Tree），是用于表示程序代码或其他结构化文本的一种树状数据结构，通过节点和连接的方式来表示代码中的各个部分以及它们之间的关系。抽象语法树在编译器中的应用包括语法分析、语义分析、优化和代码生成等。在解析 Markdown、HTML 或其他结构化文本时，也可以使用抽象语法树来表示文本的结构。举个例子，考虑以下的算术表达式：3 + 4 * 5。对应的抽象语法树可能是这样的：</p>
<pre tabindex="0"><code>    +
   / \
  3   *
     / \
    4   5
</code></pre><p>在这个 AST 中，根节点是加法运算符，左子节点是数字 3，右子节点是乘法运算符，其左右子节点分别是数字 4 和 5。</p>
<h3 id="2-commonmark-规范">
  2. CommonMark 规范
  <a class="anchor" href="#2-commonmark-%e8%a7%84%e8%8c%83">#</a>
</h3>
<p>​	CommonMark 是一个强定义的 Markdown 规范，它对很多细节做出定义，避免歧义性，这样一来，写 Markdow 解释器和转换器就比较简单了。在 CommonMark 规范中，解析 Markdown 的一般过程如下：</p>
<ol>
<li><strong>词法分析：</strong> 首先，Markdown 文本会被词法分析器拆分成词法单元，例如标记、符号、文本等。词法分析器会根据字符和符号的规则将文本分成一系列的单元。</li>
<li><strong>语法解析：</strong> 接下来，语法解析器会根据 CommonMark 的语法规则将词法单元组合成更高层次的语法结构，例如段落、标题、列表、代码块等。这个阶段会构建出抽象语法树（AST）。</li>
<li><strong>生成抽象语法树（AST）：</strong> AST 是一个表示 Markdown 文本结构的树状数据结构。每个节点代表一个文本块，例如段落、标题、链接等。节点之间的层次关系和父子关系表示了文本的结构。</li>
<li><strong>渲染：</strong> 根据生成的抽象语法树，可以将 Markdown 文本渲染成其他格式，如 HTML。不同节点类型会被映射到相应的 HTML 元素，从而实现文本在不同格式间的转换。</li>
</ol>
<p><img src="/hugo_img/parse.png" alt="" /></p>
<p>​	不同的编程语言和库可以实现自己的 CommonMark 解析器。例如 commonmark.js、commonmark-java、cmark等，这些库都提供了用于解析和渲染 Markdown 的方法和接口。而我们讨论的 Goldmark 就是用 Go 语言编写的 Markdown 解析器。还记得吗？Hugo 是一个用 Go 语言编写的快速而现代的静态网站生成器。使用这些解析器就可以实现 markdown 语法到 HTML 的转换，例如标题（#）和段落会被转换为对应的 HTML 的 <code>&lt;h&gt; </code>和 <code>&lt;p&gt; </code>标签、无序列表（- 或 *）和有序列表（数字加点）会被转换为 HTML 的 <code>&lt;ul&gt;</code> 和 <code>&lt;ol&gt; </code>列表、链接和图片语法会被转换为 HTML 的<code> &lt;a&gt;</code> 和 <code>&lt;img&gt;</code> 标签等等。</p>
<h3 id="3-goldmark">
  3. Goldmark
  <a class="anchor" href="#3-goldmark">#</a>
</h3>
<p>​	Goldmark 的核心思路是将输入的 Markdown 文本解析为一个抽象语法树（AST），然后根据这个 AST 进行进一步的处理和渲染。两个关键步骤就是解析和渲染。</p>
<h4 id="31-解析器">
  3.1 解析器
  <a class="anchor" href="#31-%e8%a7%a3%e6%9e%90%e5%99%a8">#</a>
</h4>
<p>在 Goldmark 中，解析 Markdown 文本的核心方法是 Parse，该方法用于将 Markdown 文本转换为抽象语法树（AST）。下面是关于 Parse 方法的一些细节：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;github.com/yuin/goldmark&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;github.com/yuin/goldmark/parser&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;github.com/yuin/goldmark/text&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 创建 Markdown 解析器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">md</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">goldmark</span>.<span style="color:#a6e22e">New</span>(
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 可以设置各种配置选项
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    )
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 要解析的 Markdown 文本
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">markdownText</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;# Hello, World!&#34;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 将 Markdown 文本转换为字符串读取器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">source</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">text</span>.<span style="color:#a6e22e">NewReader</span>([]byte(<span style="color:#a6e22e">markdownText</span>))
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 创建解析器上下文
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">context</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">parser</span>.<span style="color:#a6e22e">NewContext</span>()
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 解析 Markdown 文本并获得 AST
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">rootNode</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">md</span>.<span style="color:#a6e22e">Parser</span>().<span style="color:#a6e22e">Parse</span>(<span style="color:#a6e22e">source</span>, <span style="color:#a6e22e">parser</span>.<span style="color:#a6e22e">WithContext</span>(<span style="color:#a6e22e">context</span>))
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 现在你可以处理 rootNode，遍历 AST 进行操作
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><p>主要步骤如下：</p>
<ol>
<li>创建解析器实例： 使用 goldmark.New() 创建一个 goldmark.Markdown 的实例，该实例将用于解析和渲染 Markdown 文本。创建实例时可以设置各种配置选项，以控制解析器的行为。</li>
<li>创建字符串读取器： 使用 text.NewReader([]byte(markdownText)) 将 Markdown 文本转换为 Goldmark 支持的字符串读取器。字符串读取器是一个用于处理文本的 Goldmark 内部类型。</li>
<li>创建解析器上下文： 使用 parser.NewContext() 创建一个解析器上下文，用于保存解析过程中的临时状态的结构。</li>
<li>解析 Markdown 文本： 使用 md.Parser().Parse(source, parser.WithContext(context)) 方法将 Markdown 文本解析成抽象语法树（AST）。解析过程中会根据 Markdown 文本的结构和语法规则生成对应的 AST 节点。 解析后的 AST 节点树可以被进一步处理和渲染，以生成最终的 HTML 输出。</li>
</ol>
<h4 id="32-渲染器">
  3.2 渲染器
  <a class="anchor" href="#32-%e6%b8%b2%e6%9f%93%e5%99%a8">#</a>
</h4>
<p>​	Goldmark 中将 AST 节点树转换为 HTML 是通过使用渲染器（renderer）来实现的。Goldmark 提供了一种机制，我们可以根据需要为不同类型的节点定义自定义的渲染器，然后在解析过程中自动应用这些渲染器，将 AST 节点转换为相应的 HTML。下面是一个简单的示例，md.Convert 方法会自动应用默认的 HTML 渲染器，将 AST 节点转换为 HTML 格式：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;bytes&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;github.com/yuin/goldmark&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;github.com/yuin/goldmark/renderer/html&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;log&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 创建 Markdown 解析器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#a6e22e">md</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">goldmark</span>.<span style="color:#a6e22e">New</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 要解析的 Markdown 文本
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#a6e22e">markdownText</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;# Hello, *World*!&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 解析 Markdown 文本并获得 AST
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">buf</span> <span style="color:#a6e22e">bytes</span>.<span style="color:#a6e22e">Buffer</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">md</span>.<span style="color:#a6e22e">Convert</span>([]byte(<span style="color:#a6e22e">markdownText</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">buf</span>); <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 输出转换后的 HTML
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">buf</span>.<span style="color:#a6e22e">String</span>())
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="4-例子">
  4. 例子
  <a class="anchor" href="#4-%e4%be%8b%e5%ad%90">#</a>
</h3>
<p>​	Hugo 将默认的 Markdown 解析器设置成了 Goldmark，通过上述过程解析我们编写的 markdown 文件，并最终渲染成 HTML，成为我们在浏览器中看到的内容。我们可以通过下面的<a href="https://spec.commonmark.org/dingus/?text=%23%20%E4%B8%80%E7%BA%A7%E6%A0%87%E9%A2%98%0A%23%23%20%E4%BA%8C%E7%BA%A7%E6%A0%87%E9%A2%98">在线样例</a>，查看构建的AST树、最终的HTML文件和渲染效果。</p>
<ol>
<li>原始 Markdown 文件：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span># 一级标题
</span></span><span style="display:flex;"><span><span style="color:#75715e">## 二级标题
</span></span></span></code></pre></div><ol start="2">
<li>解析的 AST 树：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!DOCTYPE document SYSTEM &#34;CommonMark.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;document</span> <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://commonmark.org/xml/1.0&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;heading</span> <span style="color:#a6e22e">level=</span><span style="color:#e6db74">&#34;1&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;text&gt;</span>一级标题<span style="color:#f92672">&lt;/text&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/heading&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;heading</span> <span style="color:#a6e22e">level=</span><span style="color:#e6db74">&#34;2&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;text&gt;</span>二级标题<span style="color:#f92672">&lt;/text&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/heading&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/document&gt;</span>
</span></span></code></pre></div><ol start="3">
<li>生成的 HTML 文件：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">h1</span>&gt;一级标题&lt;/<span style="color:#f92672">h1</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">h2</span>&gt;二级标题&lt;/<span style="color:#f92672">h2</span>&gt;
</span></span></code></pre></div><ol start="4">
<li>预览效果：</li>
</ol>
<p><img src="/hugo_img/example.png" alt="" /></p>
<h2 id="三hugo-plugin及themes基础介绍">
  三、Hugo Plugin及themes基础介绍
  <a class="anchor" href="#%e4%b8%89hugo-plugin%e5%8f%8athemes%e5%9f%ba%e7%a1%80%e4%bb%8b%e7%bb%8d">#</a>
</h2>
<p>​	Hugo 中的插件（plugins）和主题（themes）都是用于扩展和定制 Hugo 网站的重要工具，官方网站上有大量成熟的插件和主题，也提供了详细的文档来帮助自定义开发插件和主题。</p>
<h3 id="1-hugo-plugins">
  1. Hugo plugins
  <a class="anchor" href="#1-hugo-plugins">#</a>
</h3>
<p>​	Hugo 插件是一些额外的代码模块，可以被集成到 Hugo 网站中，以提供额外的功能或修改现有功能。插件可以用于从各种外部数据源获取内容、优化网站性能、添加自定义功能等。插件允许我们通过几行代码来实现复杂的任务，无需手动编写大量代码。使用插件需要在 Hugo 网站的根目录下的 config.toml文件中的 plugins 部分声明你想要使用的插件。一旦插件安装好并在配置文件中设置，Hugo 就会自动应用插件的功能，可能会修改输出的页面、添加新的短代码、生成额外的资源等等。下面这个示例演示了如何使用 Hugo-mod-bootstrap 插件：</p>
<ol>
<li><strong>安装插件：</strong> 打开 Hugo 网站根目录下的 config.toml 文件，添加插件的信息：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span>[<span style="color:#a6e22e">plugins</span>]
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">Hugo-mod-bootstrap</span> = <span style="color:#e6db74">&#34;github.com/davidsneighbour/Hugo-mod-bootstrap&#34;</span>
</span></span></code></pre></div><ol start="2">
<li><strong>使用插件：</strong> 在某个 Markdown 内容中，使用插件提供的短代码来引入 Bootstrap 组件。比如，在 about.md 中使用 figure 短代码来创建一个带有 Bootstrap 样式的图像：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>title: &#34;About&#34;
</span></span><span style="display:flex;"><span>date: 2023-09-01T12:12:20+08:00
</span></span><span style="display:flex;"><span>draft: true
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>show me
</span></span><span style="display:flex;"><span><figure class="img-fluid rounded"><img src="/img/0.png"
         alt="haikyu"/>
</figure>

</span></span></code></pre></div><ol start="3">
<li>运行 Hugo，查看插件效果</li>
</ol>
<p><img src="/hugo_img/hugo_img.png" alt="" /></p>
<h3 id="2-hugo-themes">
  2. Hugo themes
  <a class="anchor" href="#2-hugo-themes">#</a>
</h3>
<p>​	Hugo 主题是预先设计好的模板和样式，用于定制网站的外观和布局。通过使用主题可以轻松地应用一整套设计风格，无需从头开始编写网站的样式和布局。主题通常包括模板文件、CSS 样式、JavaScript 脚本等，能够快速构建出具有吸引力的网站。要使用主题需要将主题的文件夹放置在 Hugo 网站的 themes 目录下，然后在配置文件中设置所选主题的名称，Hugo 将应用主题的模板、样式等内容。除了安装和配置 theme 参数之外，每个主题都有自己的配置选项，允许我们自定义主题的外观和功能。此外，在创建新的内容时，我们可以使用主题提供的布局、短代码等。这些内容需要我们去阅读主题的文档来进一步了解。以 Hugo book 为例，在使用该主题时我们可以在 config.toml 文件中添加以下配置选项：</p>
<pre tabindex="0"><code>#（可选，默认浅色）设置颜色主题：浅色、深色或自动。
BookTheme = &#39;light&#39;

#（可选，默认为 true）控制页面右侧的目录可见性。
BookToC = true

#（可选，默认无）设置图书徽标的路径。如果图片是/static/logo.png，那么路径将是&#39;logo.png&#39;
BookLogo = &#39;logo.png&#39;

#（可选，默认文档）指定要呈现为菜单的内容部分
# 也可以将值设置为“*”，将所有部分渲染到菜单
BookSection = &#39;docs&#39;
</code></pre><h2 id="四成果及问题记录">
  四、成果及问题记录
  <a class="anchor" href="#%e5%9b%9b%e6%88%90%e6%9e%9c%e5%8f%8a%e9%97%ae%e9%a2%98%e8%ae%b0%e5%bd%95">#</a>
</h2>
<h3 id="1-成果展示">
  1. 成果展示
  <a class="anchor" href="#1-%e6%88%90%e6%9e%9c%e5%b1%95%e7%a4%ba">#</a>
</h3>
<p>下面是使用 Hugo book 主题的 <a href="https://hyylc.github.io/">Hyy小站</a>，目前我简单整理了几篇学习笔记，效果图如下：</p>
<p><strong>移动端效果：</strong></p>
<p><img src="/hugo_img/show1.png" alt="" /></p>
<p><strong>网页端效果：</strong></p>
<p><img src="/hugo_img/show2.png" alt="" /></p>
<h3 id="2-问题记录">
  2. 问题记录
  <a class="anchor" href="#2-%e9%97%ae%e9%a2%98%e8%ae%b0%e5%bd%95">#</a>
</h3>
<h4 id="问题1-无法转换bookscss">
  问题1: 无法转换“book.scss”
  <a class="anchor" href="#%e9%97%ae%e9%a2%981-%e6%97%a0%e6%b3%95%e8%bd%ac%e6%8d%a2bookscss">#</a>
</h4>
<p>运行项目的时候遇到报错 <code>'failed to transform &quot;book.scss&quot; (text/x-scss)'</code>。</p>
<blockquote>
<p>这个问题是当前 Hugo 版本的问题，可以通过安装 Hugo-extend 版本解决，安装后重新建站点即可。</p>
</blockquote>
<h4 id="问题2-github上传public文件夹失败">
  问题2: GitHub上传public文件夹失败
  <a class="anchor" href="#%e9%97%ae%e9%a2%982-github%e4%b8%8a%e4%bc%a0public%e6%96%87%e4%bb%b6%e5%a4%b9%e5%a4%b1%e8%b4%a5">#</a>
</h4>
<p>部署完成后，首次提交远程仓库出现<code>'There isn't anything to compare.'</code>显示没有可以合并的内容，可以参考下述步骤合并代码至<code>main branch</code>下并提交到远程仓库。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># 切换分支至master</span>
</span></span><span style="display:flex;"><span>git checkout master
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 强制重命名master分支为main分支</span>
</span></span><span style="display:flex;"><span>git branch main master -f
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 切换分支至main</span>
</span></span><span style="display:flex;"><span>git checkout main
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 强制推送本地main分支至远程库，并覆盖远程main分支内容</span>
</span></span><span style="display:flex;"><span>git push origin main -f
</span></span></code></pre></div><h4 id="问题3-插入图片未显示">
  问题3: 插入图片未显示
  <a class="anchor" href="#%e9%97%ae%e9%a2%983-%e6%8f%92%e5%85%a5%e5%9b%be%e7%89%87%e6%9c%aa%e6%98%be%e7%a4%ba">#</a>
</h4>
<p>在一些文章中我们可能添加了图片，但是博客中并没有显示。</p>
<blockquote>
<p>主要需要排查资源路径，通常是因为没有在正确的资源目录下添加对应的图片，应该在插入图片的时候指定 src 属性，例如：src=&quot;/img/0.png&quot;，这样的话 Hugo 就会去对应的目录 static/img/0.png 下找到图片资源并显示。</p>
</blockquote>
<h4 id="问题4-无法使用-built-in-shortcode">
  问题4: 无法使用 Built-in Shortcode
  <a class="anchor" href="#%e9%97%ae%e9%a2%984-%e6%97%a0%e6%b3%95%e4%bd%bf%e7%94%a8-built-in-shortcode">#</a>
</h4>
<p>运行项目的时候遇到 Hugo 超时的问题。</p>
<blockquote>
<p>该问题是一些资源无法访问造成的，要找到 content 目录下所有和 Youtube、Twitter、Instagram 等有关的内容并删除。</p>
</blockquote>
<h2 id="五参考文献">
  五、参考文献
  <a class="anchor" href="#%e4%ba%94%e5%8f%82%e8%80%83%e6%96%87%e7%8c%ae">#</a>
</h2>
<p>[1]. <a href="https://goHugo.io/about/what-is-Hugo/">What is Hugo</a></p>
<p>[2]. <a href="https://goHugo.io/templates/render-hooks/">Markdown render hooks</a></p>
<p>[3]. <a href="https://themes.goHugo.io/themes/Hugo-book/">Hugo-Book</a></p>
<p>[4]. <a href="https://gitee.com/mirrors/goldmark#usage">Gitee 极速下载/goldmark</a></p>
<p>[5]. <a href="https://juejin.cn/post/7202164243612729400">Hugo的Markdown文件是如何被翻译成HTML的 - 掘金</a></p>
<p>[6]. <a href="https://spec.commonmark.org/0.30/">CommonMark 0.30</a></p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#前言">前言</a></li>
    <li><a href="#一-hugo安装应用及个性化配置">一、 Hugo安装应用及个性化配置</a>
      <ul>
        <li><a href="#1-hugo是什么">1. Hugo是什么</a></li>
        <li><a href="#2-搭建与使用">2. 搭建与使用</a></li>
      </ul>
    </li>
    <li><a href="#二hugo-编译-markdown原理解析">二、Hugo 编译 markdown原理解析</a>
      <ul>
        <li><a href="#1-ast">1. AST</a></li>
        <li><a href="#2-commonmark-规范">2. CommonMark 规范</a></li>
        <li><a href="#3-goldmark">3. Goldmark</a></li>
        <li><a href="#4-例子">4. 例子</a></li>
      </ul>
    </li>
    <li><a href="#三hugo-plugin及themes基础介绍">三、Hugo Plugin及themes基础介绍</a>
      <ul>
        <li><a href="#1-hugo-plugins">1. Hugo plugins</a></li>
        <li><a href="#2-hugo-themes">2. Hugo themes</a></li>
      </ul>
    </li>
    <li><a href="#四成果及问题记录">四、成果及问题记录</a>
      <ul>
        <li><a href="#1-成果展示">1. 成果展示</a></li>
        <li><a href="#2-问题记录">2. 问题记录</a></li>
      </ul>
    </li>
    <li><a href="#五参考文献">五、参考文献</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












